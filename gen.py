#Linear congruential generator

def check1(c, m):               # нахождения наибольшего общего делителя
    while c != 0 and m != 0:   
        if c > m:
            c = c % m
        else:
            m = m % c

    if c + m == 1:
        return True
    else:
        return False
      
def check2(a, m):                     # нахождение делителей числа
    a-=1
    i = 2
    simple_a = 0
    simple_m = 0

    while i * i <= m:
        while m % i == 0:
            simple_m += 1
            if (a % i == 0):
                simple_a += 1
            m /= i
        i += 1

    if (m > 1):
        simple_m += 1
        simple_a += 1

    return simple_a == simple_m
    
def check3(a, m):             # делится ли нацело на 4
    Numb = a - 1
    if (m % 4 == 0):
        if (Numb % 4 == 0):
            return True
        else:
            return False 
    else:
        return True

def lng(a, c, m, x):          # генератор чисел
    arr = []
    for _ in range(4096):        
        x = (a * x + c) % m     
        y = round((x / 4) % 4096)
        arr.append(y)   
    return arr

def write(path, arr):               # запись в файл
    f = open(path + ".txt", "w")     
    for a in arr:         
        f.write(str(a) + "\n")     
    
    f.close()
    return arr

def mistake():
    banner = """
                        ´´´´´´´´´´´´´´´´´´´´´´´´¶´´´´´´´´´¶´´´´´´´´´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´´´´´´´´¶´´´´´´´´´¶´´´´´´´´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´´´´¶´´´¶´´´´´´´´´¶´´´¶´´´´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´´´´¶´´¶¶´´´´´´´´´¶¶´´¶´´´´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´´´´¶¶´¶¶¶´´´´´´´¶¶¶´¶¶´´´´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´¶´´´´´´¶¶´´´¶¶¶´´´´´¶¶¶´´´¶¶´´´´´´¶´´´´´´´´´´´´´
                        ´´´´´´´´´´´´¶¶´´´´´´¶¶´´´¶¶¶´´´´´¶¶¶´´´¶¶´´´´´´¶¶´´´´´´´´´´´´
                        ´´´´´´´´´´´¶¶´´´´´´¶¶´´´´¶¶¶¶´´´¶¶¶¶´´´´¶¶´´´´´´¶¶´´´´´´´´´´´
                        ´´´´´´´´´´´¶¶´´´´´¶¶¶´´´´¶¶¶¶´´¶¶¶¶¶´´´´¶¶¶´´´´´¶¶¶´´´´´´´´´´
                        ´´´´´´´¶´´¶¶¶´´´´¶¶¶¶´´´´¶¶¶¶´´´¶¶¶¶´´´´¶¶¶¶´´´¶¶¶¶´´¶´´´´´´´
                        ´´´´´´´¶¶´¶¶¶¶¶´´¶¶¶¶´´´¶¶¶¶¶´´´¶¶¶¶¶´´´¶¶¶¶´´¶¶¶¶¶´¶¶´´´´´´´
                        ´´´´´´´¶¶´¶¶¶¶¶´´¶¶¶¶¶¶¶¶¶¶¶´´´´´¶¶¶¶¶¶¶¶¶¶¶´´¶¶¶¶¶´¶¶´´´´´´´
                        ´´´´´´´¶¶´¶¶¶¶¶´´¶¶¶¶¶¶¶¶¶¶¶´´´´´¶¶¶¶¶¶¶¶¶¶¶´´¶¶¶¶¶´¶¶´´´´´´´
                        ´´´´´´¶¶¶´´¶¶¶¶´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´¶¶¶¶´´¶¶¶´´´´´´
                        ´´´´´¶¶¶¶´´¶¶¶¶´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´¶¶¶¶´´¶¶¶¶´´´´´
                        ´´´´¶¶¶¶´´´¶¶¶¶¶´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´¶¶¶¶¶´´´¶¶¶¶´´´´
                        ´´´¶¶¶¶´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´¶¶¶¶´´´´
                        ´´´¶¶¶¶¶´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´¶¶¶¶´´´´
                        ´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´
                        ´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´
                        ´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´
                        ´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´
                        ´´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´
                        ´´´´´¶¶¶¶¶´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´¶¶¶¶¶´´´´´
                        ´´´´´¶¶¶¶¶¶´´´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´´´¶¶¶¶¶¶´´´´´
                        ´´´´´´¶¶¶¶¶¶¶´´´´´´´´..´´´´´¶¶¶¶¶¶¶¶¶´´´´´..´´´´´´´¶¶¶¶¶¶´´´´
                        ´´´´´´´¶¶¶¶¶¶¶¶´´´´´´´´´´´´´¶¶¶¶¶´´´´´´´´´´´´´¶¶¶¶¶¶¶¶´´´´´´´
                        ´´´´´´´´¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´¶¶¶´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶´´´´´´´´
                        ´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´
                        ´´´´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶´´´´´¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´´¶¶¶¶¶¶¶¶´´´´´´´¶¶¶¶¶¶¶¶´´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´¶¶¶¶¶¶¶¶¶´´´´´´´¶¶¶¶¶¶¶¶¶´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´¶¶¶¶¶¶¶¶¶´¶¶¶¶¶´¶¶¶¶¶¶¶¶¶´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´¶¶¶´´¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶´´¶¶¶´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´¶¶´´¶¶¶¶´´¶¶¶¶¶´´¶¶¶¶´´¶¶´´´´´´´´´´´´´´´´´´
                        ´´´´´´´´´´´´´´´´´´´´´´¶¶¶¶´´¶¶¶¶¶´´¶¶¶¶´´´´´´´´´´´´´´´´´´´´´
                     """
    print(banner)
    print("---------------------------------------------------------------------------------------------------")
    print("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
    print("!!!!!!!!!!!!!!!!!!!!!!!!!!      !ОШИБКА!    (Неправильное значение)    !!!!!!!!!!!!!!!!!!!!!!!!!!!!")
    print("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
    print("---------------------------------------------------------------------------------------------------")
    

if __name__ == "__main__":
    
    while True:
        print("###################################################################################################")
        print("#########################   Задайте параметры для генерации(q - выход):   #########################")
        print("###################################################################################################")
        print("---------------------------------------------------------------------------------------------------")

        a = input("a — множитель: ")
        if a.isdigit() == True:
            print("Значение принято в обработку!")
        elif a.lower() == "q" or a == "й" or a == "Й":
            break
        else:
            mistake()
            print("Будьте внимательны, введите ваши значения заново!")
            continue
        
        c = input("с - приращение: ")
        if c.isdigit() == True:
            print("Значение принято в обработку!")
        elif c.lower() == "q" or c == "й" or c == "Й":
            break
        else:
            mistake()
            print("Будьте внимательны, введите ваши значения заново!")
            continue

        m = input("m - модуль: ")
        if m.isdigit() == True:
            print("Значение принято в обработку!")
        elif m.lower() == "q" or m == "й" or m == "Й":
            break
        else:
            mistake()
            print("Будьте внимательны, введите ваши значения заново!")
            continue

        x = input("x - начальное значение: ")
        if x.isdigit() == True:
            print("Значение принято в обработку!")
        elif x.lower() == "q" or x == "й" or x == "Й":
            break
        else:
            mistake()
            print("Будьте внимательны, введите ваши значения заново!")
            continue
        print("------------------------------------------->>> PATH  <<<-------------------------------------------")
        path = input("Введите абсолютный путь к файлу или назвайние файла, для сохранения последовательности: ")

        print("---------------------------------------------------------------------------------------------------")

        if check1(int(c), int(m)) == True:
            print('Условие "(с,m) = 1" выполняется.')
        else:
            print('Условие "(с,m) = 1" не выполняется. Проверьте параметры c,m!')
            break
        if check2(int(a), int(m)) == True:
            print('Условие "(a - 1) делится нацело на все простые делители числа m" выполняется.')
        else:
            print('Условие "(a - 1) делится нацело на все простые делители числа m" не выполняется. Проверьте параметры a,m!')
            break
        if check3(int(a), int(m)) == True:
            print('Условие "(a - 1) делится нацело на 4, если число m делится на 4" выполняется.')
        else:
            print('Условие "(a - 1) делится нацело на 4, если число m делится на 4" не выполняется. Проверьте параметры a,m!')
            break
        print("---------------------------------------------------------------------------------------------------")
        print("---------------------------->>> Сгенерированная  последовательность <<<----------------------------")
        print("---------------------------------------------------------------------------------------------------")

        print(write(path, lng(int(a), int(c), int(m), int(x))))

        print("---------------------------------------------------------------------------------------------------")
        print("-------------------------------------------->>> END <<<--------------------------------------------")
        print("---------------------------------------------------------------------------------------------------")
        break

    print("Работа программы завершена")